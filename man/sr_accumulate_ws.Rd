% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/accum_ws.R
\name{sr_accumulate_ws}
\alias{sr_accumulate_ws}
\title{Accumulate zonal statistics upstream across a river network}
\usage{
sr_accumulate_ws(
  zonal,
  framework,
  translation = NULL,
  zonal_id_col = "GRIDCODE",
  translation_from = "GRIDCODE",
  translation_to = "FEATUREID",
  net_id_col = "COMID",
  sum_col = "sum",
  count_col = "count",
  mean = TRUE,
  ...
)
}
\arguments{
\item{zonal}{Zonal results as a data.frame/data.table, Arrow table/dataset, or a file path to parquet.}

\item{framework}{Either a \code{pairs_dir} path or an \code{"sr_accum_framework"} object returned by
\code{\link[=sr_streamcat_framework]{sr_streamcat_framework()}}.}

\item{translation}{Optional translation table (data.frame/Arrow table) or parquet path.
Used to map \code{zonal_id_col} to \code{net_id_col} (e.g., GRIDCODE -> FEATUREID/COMID).
If NULL, assumes zonal IDs already match network IDs.}

\item{zonal_id_col}{Column name in \code{zonal} identifying zones (default \code{"GRIDCODE"}).}

\item{translation_from}{Column name in \code{translation} matching \code{zonal_id_col} (default \code{"GRIDCODE"}).}

\item{translation_to}{Column name in \code{translation} providing network IDs (default \code{"FEATUREID"}).}

\item{net_id_col}{Output network ID column name (default \code{"COMID"}).}

\item{sum_col}{Name of the catchment-level sum column (default \code{"sum"}).}

\item{count_col}{Name of the catchment-level count column (default \code{"count"}).}

\item{mean}{Logical; if TRUE, compute mean as sum/count at both catchment and watershed scale.}

\item{...}{Reserved for future options.}
}
\value{
A data.table with one row per network ID and columns for catchment and watershed metrics.
}
\description{
Given zonal outputs (e.g., from \code{\link[=sr_zonal_region]{sr_zonal_region()}} or \code{\link[=sr_zonal_all]{sr_zonal_all()}}) and a staged
upstream-pairs dataset (built by \code{\link[=sr_streamcat_framework]{sr_streamcat_framework()}}), compute upstream (watershed)
accumulated statistics.
}
\details{
Supports optional translation from raster GRIDCODE IDs to network IDs (e.g., COMID/FEATUREID).
}
